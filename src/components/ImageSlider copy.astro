---
import { Image } from "astro:assets";

interface Props {
	slides: [
		{
			slideId: string;
			dotId: string;
			slideClass: string;
			slideUrl: string;
			slideAlt: string;
		}
	]
}

const { slides } = Astro.props
---

<section class="slider">
    <div class="wrapper">
		<div class="slides">
			{
				slides.map((slide: any) => (
					<figure class={slide.slideClass}>
						<input type="radio" class="radio" name="images" id={slide.slideId} />
						<img src={slide.slideUrl} alt={slide.slideAlt} id={slide.slideId} />
                		<figcaption>{slide.slideAlt}</figcaption>
            		</figure>
				))
			}
			<nav id="nav-slides">
				{
					slides.map((slide: any) => (
					<label for={slide.slideClass} id={slide.dotId} class="dots">
						<img src={slide.slideUrl} alt={slide.slideAlt} /></label>
					))
				}
			</nav>
        </div>
    </div>
</section>

<style>
    img { object-fit: cover; }

	.radio {
		position: absolute;
		bottom: 40px;
		opacity: 0.01;
	}
	
	#image1,
	#image2,
	#image3,
	#image4,
	#image5 { accent-color: grey; }

	.slider { padding: 1rem 0 5rem; }

	.wrapper {
		position: relative;
		max-width: 34rem;
		aspect-ratio: 1/1;
		margin: 1.5rem auto 5vw;
		background: var(--background);
	}

	:global(.dark) .wrapper { background: #22201c; }
	
	.slides {
		box-shadow: 0 1.5rem 3rem -0.75rem rgba(0, 0, 0, 0.25);
		width: 100%;
		aspect-ratio: 1/1;
		overflow-x: auto;
		overflow-y: hidden;
		white-space: nowrap;
		scroll-behavior: smooth;
		scroll-snap-type: x mandatory;
		gap: 1rem;
		-webkit-overflow-scrolling: touch;
		box-shadow: 0 1.5rem 3rem -0.75rem rgba(0, 0, 0, 0.25);
	}

	.slider .slides::-webkit-scrollbar { display: none; }
	
	.slider .slides {
		scrollbar-width: none;
		-ms-overflow-style: none;
	}
	
	.slider .slide {
		position: relative;
		display: inline-block;
		width: 100%;
		height: 100%;
		scroll-snap-align: start;
		scroll-snap-stop: always;
	}

	.slider .slide figcaption {
		position: absolute;
		display: block;
		bottom: 0;
		left: 0;
		width: 100%;
		max-inline-size: var(--size-content-3);
		font-size: 1.2rem;
		text-align: center;
		color: #e2dbbe;
		background: rgba(0, 0, 0, 0.7);
		padding: .3rem;
		margin: 0;
		white-space: normal;
	}

	#nav-slides {
		position: absolute;
		left: 50%;
		bottom: -14vw;
		transform: translateX(-50%);
		display: flex;
		gap: 3vw;
	}

	.dots {
        /* pointer-events: none; */
		width: 10vw;
		height: 10vw;
		border-radius: 50%;
		overflow: hidden;
		opacity: 0.7;
		filter: saturate(0.5);
		transition: opacity ease 250ms;
		box-shadow: 0 1rem 1rem -0.75rem rgba(0, 0, 0, 0.25);
	}

	.dots img{
		width: 100%;
		object-fit: cover;
	}

	#nav-slides .dots:hover {
		cursor: pointer;
		opacity: 1;
		filter: saturate(1);
		transition: opacity 250ms ease;
	}

	.slide {z-index: 1;}

	#image1:checked ~ .one,
	#imabe2:checked ~ .two,
	#image3:checked ~ .three,
	#image4:checked ~ .four,
	#image5:checked ~ .five 
	{z-index: 9; animation: scroll 1s ease-in-out;}
	
	
	
	@media screen  and (min-width: 48rem){
		.slider {
			margin: 2rem 0 3rem 2rem;
        }
		
		.wrapper {
			width: 50vw;
			margin: 0;
			border-radius: 1rem;
		}
		
		.slides {
			border-radius: 1rem;
			overflow: hidden;
		}
		
		#nav-slides {
			position: absolute;
			left: 50%;
			bottom: -5rem;
			transform: translateX(-50%);
			display: flex;
			gap: 2.5vw;
		}

		.dots {
			width: 4rem;
			height: 4rem;
			border-radius: 50%;
			opacity: 0.6;
			filter: saturate(0.5);
			transition: opacity ease 250ms;
			box-shadow: 0 1rem 1rem -0.75rem rgba(0, 0, 0, 0.25);
		}

		.dots img{
			width: 100%;
			object-fit: cover;
		}
		
		.slides :has(#image1:checked) ~ #nav-slides #dot1,
		.slides :has(#image2:checked) ~ #nav-slides #dot2,
		.slides :has(#image3:checked) ~ #nav-slides #dot3,
		.slides :has(#image4:checked) ~ #nav-slides #dot4,
		.slides :has(#image5:checked) ~ #nav-slides #dot5 {
			opacity: 1;
			filter: saturate(1);
		}
	}
</style>
